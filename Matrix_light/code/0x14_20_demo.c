#include <reg52.h>


code char font[] = {
	0xff,0xff,0xc1,0xbe,0xbe,0xc1,0xff,0xff, //0
	0x7e,0xbd,0xdb,0xe7,0xe7,0xdb,0xbd,0x7e, //x
	0xff,0xbf,0xbb,0x81,0x80,0xbf,0xbf,0xff, //1
	0xff,0xe7,0xeb,0xed,0x80,0x80,0xef,0xff, //4
	0xff,0xff,0xdb,0xdb,0xdb,0xdb,0xff,0xff, // =
	0xff,0xbd,0x9e,0xae,0xb6,0xb9,0xff,0xff, //2
	0xff,0xff,0xc1,0xbe,0xbe,0xc1,0xff,0xff, //0
	0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff, //nan
	0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff, //nan
	0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff, //nan
	
};
code char com[]={0x80,0x40,0x20,0x10,0x08,0x04,0x02,0x01};
char disp[8],n_disp[8];	
void delay(unsigned value)		
  {while(value>0) value--;}
void main(void)				     
  {unsigned char i,time,cmp=200,j;
	 unsigned char shift_cnt=0,ptr=16;
   for(i=0;i<8;i++)
	   {disp[i]= font[i];	 
      n_disp[i]=font[i+8];
     }
   while(1)
	   {for(i=0;i<8;i++)   
	      {P0=0xff;
		     P0= disp[i];
	       P1=com[i];
		     delay(50);   
	      }
	    time++;			  
	    if(time>=cmp)	  
		    {time=0;
		     for(j=0;j<7;j++)
			     {disp[j]=disp[j+1];}  
		        disp[7]=n_disp[shift_cnt];  
		        shift_cnt++;	  
		        if(shift_cnt>=8)   
			        {shift_cnt=0;
			         cmp=200;
		           for(i=0;i<8;i++)	 
				         {n_disp[i]=font[ptr+i];}
				       ptr=ptr+8;
				       if(ptr>=80) ptr=0;
		          }
		        else cmp=40;	 
	      }
     }
  }

